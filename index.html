<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>База знаний — Тестовое задание (PHP)</title>
  <style>
    :root {
      --bg: #0f172a;
      --panel: #111827;
      --panel-2: #0b1220;
      --text: #e5e7eb;
      --muted: #9ca3af;
      --accent: #60a5fa;
      --selected: #fff3b0;
      --border: #1f2937;
    }

    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Arial, "Apple Color Emoji", "Segoe UI Emoji";
      background: linear-gradient(180deg, var(--bg), #0b1020 60%, #080c18);
      color: var(--text);
    }

    header {
      padding: 20px clamp(16px, 2vw, 28px);
      border-bottom: 1px solid var(--border);
      display: flex;
      align-items: baseline;
      justify-content: space-between;
      gap: 12px;
    }
    header h1 {
      margin: 0;
      font-size: clamp(20px, 2.8vw, 28px);
      letter-spacing: 0.3px;
    }
    header p { margin: 0; color: var(--muted); font-size: 14px; }

    .app {
      display: grid;
      grid-template-columns: 260px 280px 1fr;
      gap: 16px;
      padding: 16px clamp(16px, 2vw, 28px) 28px;
      max-width: 1400px;
      margin: 0 auto;
    }

    .panel {
      background: radial-gradient(120% 140% at 80% -10%, #17223b 0%, var(--panel) 48%, var(--panel-2) 100%);
      border: 1px solid var(--border);
      border-radius: 16px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.35);
      overflow: hidden;
      display: flex;
      flex-direction: column;
      min-height: 420px;
    }

    .panel h2 {
      margin: 0;
      padding: 14px 16px;
      border-bottom: 1px solid var(--border);
      font-size: 15px;
      letter-spacing: 0.4px;
      color: #dbeafe;
      background: linear-gradient(180deg, rgba(96,165,250,0.12), rgba(96,165,250,0.02));
    }

    .list {
      list-style: none;
      margin: 0;
      padding: 6px;
      overflow: auto;
      scrollbar-width: thin;
      scrollbar-color: #334155 transparent;
      flex: 1;
    }

    .item {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 12px 12px;
      margin: 6px;
      border: 1px solid transparent;
      border-radius: 12px;
      background: rgba(255,255,255,0.02);
      transition: transform .06s ease, background .12s ease, border-color .12s ease;
      cursor: pointer;
      user-select: none;
      outline: none;
    }
    .item:hover { background: rgba(96,165,250,0.08); border-color: #1f3b66; }
    .item:active { transform: translateY(1px); }
    .item .dot { width: 9px; height: 9px; border-radius: 50%; background: var(--accent); opacity: .8; }

    .item.selected { background: var(--selected); color: #1f2937; border-color: #d4b106; }
    .item.selected .dot { background: #b58100; }

    .content {
      padding: 16px 18px 22px;
      overflow: auto;
      flex: 1;
    }

    .content .badge {
      display: inline-block;
      padding: 6px 10px;
      border-radius: 999px;
      font-size: 12px;
      letter-spacing: 0.3px;
      color: #0b1220;
      background: #fde68a;
      border: 1px solid #f59e0b;
    }

    .content h3 { margin: 14px 0 8px; font-size: 20px; }
    .content p { margin: 10px 0; line-height: 1.65; color: #d1d5db; }

    .footer-note { color: var(--muted); font-size: 12px; margin-top: 14px; }

    @media (max-width: 980px) {
      .app { grid-template-columns: 1fr; }
      .panel { min-height: auto; }
    }

    .item:focus-visible { outline: 2px solid #60a5fa; outline-offset: 2px; }
  </style>
</head>
<body>
  <header>
    <h1>Мини‑база знаний</h1>
    <p>Кликайте в колонках «Тема» и «Подтема». Выбранное подсвечивается жёлтым.</p>
  </header>

  <main class="app" id="app">
    <section class="panel" aria-label="Тема">
      <h2>Тема</h2>
      <ul class="list" id="topics" role="listbox" aria-label="Список тем"></ul>
    </section>

    <section class="panel" aria-label="Подтема">
      <h2>Подтема</h2>
      <ul class="list" id="subtopics" role="listbox" aria-label="Список подтем"></ul>
    </section>

    <section class="panel" aria-label="Содержание">
      <h2>Содержание</h2>
      <div class="content" id="content"></div>
    </section>
  </main>

  <script>
    const DATA = {
      'Тема 1': ['Подтема 1.1', 'Подтема 1.2', 'Подтема 1.3'],
      'Тема 2': ['Подтема 2.1', 'Подтема 2.2', 'Подтема 2.3']
    };

    const topicsEl = document.getElementById('topics');
    const subtopicsEl = document.getElementById('subtopics');
    const contentEl = document.getElementById('content');

    let currentTopic = 'Тема 1';
    let currentSubtopic = 'Подтема 1.1';

    document.addEventListener('DOMContentLoaded', () => {
      renderTopics();
      renderSubtopics();
      renderContent();
    });

    function renderTopics() {
      topicsEl.innerHTML = '';
      Object.keys(DATA).forEach(topic => {
        const li = document.createElement('li');
        li.className = 'item' + (topic === currentTopic ? ' selected' : '');
        li.tabIndex = 0;
        li.setAttribute('role', 'option');
        li.setAttribute('aria-label', topic);
        li.dataset.topic = topic;
        li.innerHTML = `<span class="dot" aria-hidden="true"></span><span>${topic}</span>`;
        li.addEventListener('click', onTopicClick);
        li.addEventListener('keypress', e => { if (e.key === 'Enter' || e.key === ' ') onTopicClick.call(li, e); });
        topicsEl.appendChild(li);
      });
    }

    function renderSubtopics() {
      subtopicsEl.innerHTML = '';
      const subs = DATA[currentTopic] || [];
      if (!subs.includes(currentSubtopic)) currentSubtopic = subs[0] || '';
      subs.forEach(sub => {
        const li = document.createElement('li');
        li.className = 'item' + (sub === currentSubtopic ? ' selected' : '');
        li.tabIndex = 0;
        li.setAttribute('role', 'option');
        li.setAttribute('aria-label', sub);
        li.dataset.subtopic = sub;
        li.innerHTML = `<span class="dot" aria-hidden="true"></span><span>${sub}</span>`;
        li.addEventListener('click', onSubtopicClick);
        li.addEventListener('keypress', e => { if (e.key === 'Enter' || e.key === ' ') onSubtopicClick.call(li, e); });
        subtopicsEl.appendChild(li);
      });
    }

    function renderContent() {
      const text = `Некий текст, привязанный к ${currentSubtopic}`;
      contentEl.innerHTML = `
        <span class="badge">Вы выбрали: ${currentTopic} → ${currentSubtopic}</span>
        <h3>${currentSubtopic}</h3>
        <p>${text}</p>
        <div class="footer-note">Подсказка: при смене темы автоматически выбирается первая её подтема.</div>
      `;
    }

    function onTopicClick() {
      const selected = this.dataset.topic;
      if (!selected || selected === currentTopic) return;
      currentTopic = selected;
      currentSubtopic = (DATA[currentTopic] && DATA[currentTopic][0]) || '';
      renderTopics();
      renderSubtopics();
      renderContent();
    }

    function onSubtopicClick() {
      const selected = this.dataset.subtopic;
      if (!selected || selected === currentSubtopic) return;
      currentSubtopic = selected;
      renderSubtopics();
      renderContent();
    }
  </script>
</body>
</html>
